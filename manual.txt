vscodeでvenvを使う

--------------------------------vscode terminal
１．まず、Ctrl+Shift+Pで、interpreterにローカルのpythonを選択する（なんでもいい）

作業フォルダーを作って、その作業フォルダー下で
>python -m venv venv


２．次に仮想環境venvのpythonを使うため、comand+shift+Pでpython インタラプターから仮想環境venvのpythonを選ぶ
.\venv\Scripts\python.exeを選ぶ


3. 仮想環境をactivateできるようにするため、権限を付与する
>Get-ExecutionPolicy
Restricted になっていると、仮想環境をactivateできない

>Set-ExecutionPolicy RemoteSigned -Scope Process
>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser -Force #こっちは二回目以降不要


4．仮想環境をactivateする
>.\venv\Scripts\activate


5. 一度で複数のコマンドを実行する方法
run_commands.ps1ファイルに下記みたいな書く。
'''sh file
python main_pretrain.py --epochs 100
python main_pretrain.py --epochs 50
python run.py
'''

powerpointターミナルで実行
>./run_commands.ps1


6. pytorchのtensorboardで結果を見る
>tensorboard --logdir ./trained_model/20240702_155008 # ログファイルが含まっているフォルダーまで
.tensorboard --logdir=runs
デフォルトだとlocalhost:6006にアクセスする



--------------------------------requirements.txt
このライブラリーをインストールするコマンドは「.\venv\Scripts\activate」で仮想環境のプロンプトで実行する

仮想環境下でinstall packages
>pip install -r requirements.txt

出力
>pip freeze > requirements.txt


--------------------------------Githubにpushする（Git Bashターミナルで行う）
git add . # すべての変更されたファイルをステージングエリアに追加する
git commit -m "メッセージ"
git remote add origin https://github.com/kazuakiishihara/ichtrain.git
git push -u origin main # 次回以降はgit pushでおけ

git reset --soft HEAD^ # 直前のコミットの取り消し

git config --global --list
git remote -v
git log

--------------------GPUを使う方法
install packagesの操作で、関連パッケージでtorchとtorchvisionもインストールされる
そのため、まず。、torchとtorchvisionを削除する

>pip uninstall torch torchvision

# CUDA 11.3
>pip install torch==1.11.0+cu113 torchvision==0.12.0+cu113 torchaudio==0.11.0 --extra-index-url https://download.pytorch.org/whl/cu113

https://pytorch.org/get-started/previous-versions/
からCUDA11.3に対応するPytorchをインストールする
(なぜCUDA11.3か分からないが、初期の状態のAnacondaでCUDA11.3が入っていたから)

condaだと、RTX A6000に対応していないみたいだし、
Anaconda上でpipでインストールすると、パッケージ同士のバージョンの相性がよくなさそうで、
結局動かない